<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>TravelingWeb</display-name>
  <context-param>
    <param-name>webAppRootKey</param-name>
    <param-value>webApp.root</param-value>
  </context-param>
  <context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>classpath:log4j.properties</param-value>
  </context-param>
  <context-param>
    <param-name>log4jRefreshInterval</param-name>
    <param-value>60000</param-value>
  </context-param>
  <listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
  </listener>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
			classpath:/com/xmniao/xmn/resource/config/spring-context.xml
		</param-value>
  </context-param>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <listener>
    <listener-class>com.xmniao.xmn.core.util.listener.ResourceContextLoaderListener</listener-class>
  </listener>
  <servlet>
    <servlet-name>spring-mvc</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>classpath:/com/xmniao/xmn/resource/config/spring-mvc-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>spring-mvc</servlet-name>
    <url-pattern>*.jhtml</url-pattern>
  </servlet-mapping>
  <filter>
    <filter-name>encodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
      <param-name>encoding</param-name>
      <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
      <param-name>forceEncoding</param-name>
      <param-value>true</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter>
    <filter-name>getEncodingFilter</filter-name>
    <filter-class>com.xmniao.xmn.core.util.filters.encodingFilter.EncodingFilter</filter-class>
    <init-param>
      <param-name>encoding</param-name>
      <param-value>UTF-8</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>getEncodingFilter</filter-name>
    <url-pattern>*.jhtml</url-pattern>
  </filter-mapping>
  <filter>
    <filter-name>authorityFilter</filter-name>
    <filter-class>com.xmniao.xmn.core.util.filters.authorityFilter.AuthorityFilter</filter-class>
    <init-param>
    <!-- 跳过登录权限验证 -->
      <param-name>loginSkipPage</param-name>
      <param-value>
      	  /division/initDivisionId.jhtml,/ckeditorUpload.jhtml,
      	  /anchor/manage/getLiverRankInfo.jhtml,/liveLevel/manage/initAnchorLevelId.jhtml,/businessman/classify/liveRecordClassifyInit.jhtml,
      	  /businessman/classify/liveRecordTagInit.jhtml,/anchor/manage/initLiverExclude.jhtml,/liveMember/manage/checkAccount.jhtml,/anchor/manage/init/isConflict.jhtml,
      	  /anchor/manage/initLiverId.jhtml,/anchor/manage/getAnchorInfo.jhtml,/liveFansRank/manage/getFansRankInfoById.jhtml,/liveFansRank/manage/getFansRanks.jhtml,/saasTag/manage/getTagsByType.jhtml,
      	  /saasRole/manage/getCelebrityInfoById.jhtml,/saasRole/manage/getCelebrities.jhtml,/saasTag/manage/getSaasTags.jhtml,/materials/manage/getShoppingMaterialAttrs.jhtml,
      	  /materialAttr/manage/getRelationAttrs.jhtml,/supplier/manager/getDesignerSuppliers.jhtml,/materialCategory/manage/getCategorys.jhtml,
	      /materialTag/manage/getRelationTags.jhtml,/materialTag/manage/getTags.jhtml,/materialAttr/manage/getAttrs.jhtml,/anchor/manage/getAnchorById.jhtml,/anchor/manage/initAnchorId.jhtml,
	      /businessman/seller/getSellerLandmarkInfoById.jhtml,/businessman/seller/getSellerInfoById.jhtml,/businessman/seller/getSellerIdAndName.jhtml,/saleArea.jhtml,
	      /top.jhtml,/right.jhtml,/left.jhtml,/title.jhtml,/main.jhtml,/checkUsername.jhtml,/checkAccount.jhtml,/findAreaInfo.jhtml,/BusinessList.jhtml,/getAll.jhtml,
	      /getLdAll.jhtml,/provinceList.jhtml,/cityList.jhtml,/selectAreaList.jhtml,/uploadFile.jhtml,/checkPhone.jhtml,/openHtml.jhtml,/getMatrix.jhtml,/getBigMatrix.jhtml,
	      /businessInfo.jhtml,/jointList.jhtml,/getFatherSeller.jhtml,/getActivitys.jhtml,/getActivity.jhtml,/getActivityType.jhtml,/getJointInfoByArea.jhtml,
	      /getStaffsByJointid.jhtml,/currentChangePassword.jhtml,/seeSupplementaryInformation.jhtml,/bindCardInit.jhtml,/bindCardList.jhtml,/getTBanks.jhtml,
	      /activityManagerSeller.jhtml,/list.jhtml,/initlist.jhtml,/mingxi/init.jhtml,/youhuiquan.jhtml,/viewCouponInit.jhtml,/viewAreaInit.jhtml,/InitSeller.jhtml,
	      /BargainSellerInit.jhtml,/billBargainInit.jhtml,/add.jhtml,/update.jhtml,/subShopinit.jhtml,/userlist/init.jhtml,/viewSellers/init.jhtml,/viewArea/init.jhtml,
	      /viewCoupon/init.jhtml,/addUsers/init.jhtml,/choseMember/init.jhtml,/sendshortmessage/addUsers.jhtml,/userlist.jhtml,/queryYouHuiQuan.jhtml,
	      /sendshortmessage/sendMessage.jhtml,/updateCouponIssueStatus.jhtml,/beachStatus.jhtml,/viewWalletInit.jhtml,/authorizedInit.jhtml,/authorized.jhtml,
	      /choseSeller/init.jhtml,/getSellerCount.jhtml,/viewWallet.jhtml,/getCourierType.jhtml,/downLoadStick.jhtml,/getActivityChoose.jhtml,/activity/getProduct.jhtml,/saveDediModule.jhtml,/saveFreshImage.jhtml,   
	      /saveHotBrand.jhtml,/saveDediModule.jhtml,/deleteBanner.jhtml,/deleteBrand.jhtml,/activity/group/init.jhtml,getSeatsByIds.jhtml,getPricesBySeatsIds.jhtml,getSeatsChooseByIds.jhtml,/division/getCitys.jhtml,
	      /burs/getUserChoose.jhtml
      </param-value>
    </init-param>
    <init-param>
      <param-name>filterTypes</param-name>
      <param-value>.jhtml</param-value>
    </init-param>
    <init-param>
      <param-name>skipPage</param-name>
      <param-value>/login.jhtml,/ulogin.jhtml,/uploadFileTest.jhtml,/logout.jhtml,/uploadFile.jhtml,/materialOrder/manage/joinPic.jhtml</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>authorityFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter>
    <filter-name>CompressingFilter</filter-name>
    <filter-class>com.planetj.servlet.filter.compression.CompressingFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>CompressingFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter>
    <filter-name>XssSqlFilter</filter-name>
    <filter-class>com.xmniao.xmn.core.util.filters.xssSqlFilter.XssSqlFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>XssSqlFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
  </filter-mapping>
  <servlet>
    <servlet-name>Kaptcha</servlet-name>
    <servlet-class>com.google.code.kaptcha.servlet.KaptchaServlet</servlet-class>
    <init-param>
      <param-name>kaptcha.border</param-name>
      <param-value>no</param-value>
    </init-param>
    <init-param>
      <param-name>kaptcha.textproducer.font.color</param-name>
      <param-value>204,85,25</param-value>
    </init-param>
    <init-param>
      <param-name>kaptcha.textproducer.char.length</param-name>
      <param-value>4</param-value>
    </init-param>
    <init-param>
      <param-name>kaptcha.noise.impl</param-name>
      <param-value>com.google.code.kaptcha.impl.NoNoise</param-value>
    </init-param>
    <init-param>
      <param-name>kaptcha.textproducer.char.space</param-name>
      <param-value>5</param-value>
    </init-param>
    <init-param>
      <param-name>kaptcha.textproducer.font.size</param-name>
      <param-value>28</param-value>
    </init-param>
    <init-param>
      <description>Height in pixels of the kaptcha image. </description>
      <param-name>kaptcha.image.height</param-name>
      <param-value>44</param-value>
    </init-param>
    <init-param>
      <description>width in pixels of the kaptcha image. </description>
      <param-name>kaptcha.image.width</param-name>
      <param-value>90</param-value>
    </init-param>
    <init-param>
      <param-name>kaptcha.textproducer.char.string</param-name>
      <param-value>1234567890</param-value>
    </init-param>
    <init-param>
      <param-name>kaptcha.textproducer.font.names</param-name>
      <param-value>微软雅黑</param-value>
    </init-param>
    <init-param>
      <param-name>kaptcha.obscurificator.impl</param-name>
      <param-value>com.google.code.kaptcha.impl.WaterRipple</param-value>
    </init-param>
  </servlet>
  <servlet-mapping>
    <servlet-name>Kaptcha</servlet-name>
    <url-pattern>/Kaptcha.jpg</url-pattern>
  </servlet-mapping>
  <!-- <error-page>
    <error-code>404</error-code>
    <location>/404.html</location>
  </error-page>
  <error-page>
    <error-code>500</error-code>
    <location>/500.html</location>
  </error-page> -->
  <welcome-file-list>
    <welcome-file>login.jhtml</welcome-file>
  </welcome-file-list>
</web-app>